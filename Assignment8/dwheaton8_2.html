<!DOCTYPE html>
<html>
   <head>
    <title>Lab 8 part 2| D3</title>
    <style>
body {
    position: absolute;
    font-family: 'soleil', 'HelveticaNeue-UltraCondensed', 'HelveticaNeue-Condensed', 'Ubuntu Condensed', 'Liberation Sans Narrow', arial narrow, arial, sans-serif;
    font-weight: 700;
    color: #0F1E8C;
    line-height: 1.25;
    transition: font-size 0.1s ease-out;
}
h1, h2 {
    position: absolute;
    background: white;
    left: 10px;
    font-size: 1.3em;
    font-weight: 100;
}
h2 {
top: 30px;
    font-size: 1em;
}
.hover {
    fill: yellow;
} 
</style>
    <script src="https://d3js.org/d3.v5.min.js" charset="utf-8"></script>
    <script src="omaroads.js"></script>
    <script src="vblocs.js"></script>
   </head>
    <body>
        <h1>Properties managed by VineBrook Homes</h1>
    <h2></h2>
<script>
//width and height of the visualization
var width = 1000;
  var height = 600;
  
var lowColor = '#bc2a66'
var highColor = '#f9f9f9'
var minVal = 41642001
var maxVal = 754000000000
var ramp = d3.scaleLinear().domain([minVal,maxVal]).range([lowColor,highColor]);

//create the SVG
  var svg = d3.select( "body" )
  .append( "svg" )
  .attr( "width", width )
  .attr( "height", height );
  
var g = svg.append( "g" );
var albersProjection = d3.geoAlbers()
    .scale( 2850000 )
    .rotate( [96.008314,0] )
    .center( [0, 41.2747571] )
    .translate( [width/2,height/2] );
	
var geoPath = d3.geoPath()
    .projection( albersProjection );
	
    g.selectAll( "path" )
    .data( omaroads.features )
	.enter()
    .append( "path" )
    .attr( "fill", "#ccc" ) 
	.attr( "stroke", "#333")
	.attr( "d", geoPath );
	
var lnk_json = svg.append( "g" );

    lnk_json.selectAll( )
    .data( vblocs.features )
	.enter()
    .append( "path" )
    .attr( "fill", function(d) { return ramp(d.properties.Parcel_Id) })
    .attr( "stroke", "#999" )
	.attr( "d", geoPath )
    .attr("class","buildingdata")

.on("mouseover", function(d){
//populate h2 with "built in" & the year built field from the json
d3.select("h2").text("Built in " + d.properties.Parcel_Id); d3.select(this).attr("class","buildingdata hover"); })
//here, D3 to replace text interactively based on building data
       .on("mouseout", function(d){
              d3.select("h2").text("");
              d3.select(this).attr("class","buildingdata");
       });
        </script>
   </body>
</html>